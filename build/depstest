#!/usr/bin/env bash

source "$(dirname ${BASH_SOURCE[0]})/lib/_shared.bash"
include "bl_env"

safe_cd "$BL_LOCAL_PATH"

say "obtaining criterion test framework..."
CRITERION_VER="v2.3.2"
CRITERION_FILE="criterion-$CRITERION_VER-linux-x86_64.tar.bz2"
run_or_die "download" curl -L -O "https://github.com/Snaipe/Criterion/releases/download/$CRITERION_VER/$CRITERION_FILE"
run_or_die "extract" tar xvjf "$CRITERION_FILE" --strip 1
run "cleanup" rm -v "$CRITERION_FILE"

if scriptsame; then
  ok "run build/test to run tests!"
fi
